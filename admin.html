<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
	<title>風 Kaze Crafts 管理パネル | Admin Panel</title>
	
	<!-- Google Fonts - Same as main site -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Noto+Serif+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
	
	<!-- Firebase SDKs -->
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
	<script src="firebase-config.js?v=5"></script>

	<!-- Icons -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	
	<!-- Styles -->
	<link rel="stylesheet" href="admin.css?v=2">
</head>
<body>
	<!-- Background Elements (same as main site) -->
	<div class="gradient-bg"></div>
	<div class="paper-texture"></div>

	<!-- Main Admin App -->
	<div id="adminApp" class="admin-app" style="display: none;">
		<!-- Premium Header -->
		<header class="admin-header-premium">
			<div class="admin-header-content">
				<div class="admin-brand">
					<img src="kazeblank.png" alt="Kaze Crafts" class="admin-logo">
					<div class="admin-brand-text">
						<div class="admin-brand-title">管理パネル</div>
						<div class="admin-brand-subtitle">Admin Panel</div>
					</div>
				</div>
				
				<div class="admin-header-spacer"></div>
				
				<div class="admin-user-section">
					<div class="admin-user-info">
						<div class="admin-user-avatar">
							<i class="fas fa-user-circle"></i>
						</div>
						<div class="admin-user-details">
							<div class="admin-user-name" id="adminUserEmail"></div>
							<div class="admin-user-role" id="adminUserRole"></div>
						</div>
					</div>
					<button id="adminLogoutBtn" class="admin-logout-btn">
						<i class="fas fa-sign-out-alt"></i>
						<span class="logout-text">ログアウト</span>
						<span class="logout-text-en">Logout</span>
					</button>
				</div>
			</div>
		</header>

		<!-- Elegant Navigation -->
		<nav class="admin-nav-premium">
			<div class="admin-nav-content">
				<button class="admin-tab-btn active" data-tab="dashboard">
					<i class="fas fa-gauge"></i>
					<span class="tab-label-jp">ダッシュボード</span>
					<span class="tab-label-en">Dashboard</span>
				</button>
				<button class="admin-tab-btn" data-tab="products">
					<i class="fas fa-box"></i>
					<span class="tab-label-jp">商品</span>
					<span class="tab-label-en">Products</span>
				</button>
				<button class="admin-tab-btn" data-tab="artisans">
					<i class="fas fa-users"></i>
					<span class="tab-label-jp">職人</span>
					<span class="tab-label-en">Artisans</span>
				</button>
				<button class="admin-tab-btn" data-tab="content">
					<i class="fas fa-pen-to-square"></i>
					<span class="tab-label-jp">コンテンツ</span>
					<span class="tab-label-en">Content</span>
				</button>
			</div>
		</nav>

		<!-- Main Content Area -->
		<main class="admin-main-premium">
			
			<!-- Dashboard Tab -->
			<section id="tab-dashboard" class="admin-tab active">
				<div class="admin-page-header">
					<h1 class="admin-page-title-jp">ようこそ</h1>
					<h2 class="admin-page-title-en">Welcome</h2>
					<p class="admin-page-description">
						このパネルで商品、職人、コンテンツを管理できます<br>
						<span class="description-en">Manage products, artisans, and content from this panel</span>
					</p>
				</div>

				<div class="admin-stats-grid">
					<div class="admin-stat-card">
						<div class="stat-icon">
							<i class="fas fa-box"></i>
						</div>
						<div class="stat-content">
							<div class="stat-value" id="statProducts">—</div>
							<div class="stat-label-jp">商品</div>
							<div class="stat-label-en">Products</div>
						</div>
					</div>
					
					<div class="admin-stat-card">
						<div class="stat-icon">
							<i class="fas fa-users"></i>
						</div>
						<div class="stat-content">
							<div class="stat-value" id="statArtisans">—</div>
							<div class="stat-label-jp">職人</div>
							<div class="stat-label-en">Artisans</div>
						</div>
					</div>
					
					<div class="admin-stat-card">
						<div class="stat-icon">
							<i class="fas fa-file-lines"></i>
						</div>
						<div class="stat-content">
							<div class="stat-value" id="statContent">—</div>
							<div class="stat-label-jp">コンテンツキー</div>
							<div class="stat-label-en">Content Keys</div>
						</div>
					</div>
				</div>

				<div class="admin-quick-actions">
					<h3 class="quick-actions-title">
						<span class="title-jp">クイックアクション</span>
						<span class="title-en">Quick Actions</span>
					</h3>
					<div class="quick-actions-grid">
						<button class="quick-action-btn" onclick="switchToTab('products'); document.getElementById('btnNewProduct').click()">
							<i class="fas fa-plus"></i>
							<span class="action-text-jp">新しい商品を追加</span>
							<span class="action-text-en">Add New Product</span>
						</button>
						<button class="quick-action-btn" onclick="switchToTab('artisans'); document.getElementById('btnNewArtisan').click()">
							<i class="fas fa-user-plus"></i>
							<span class="action-text-jp">新しい職人を追加</span>
							<span class="action-text-en">Add New Artisan</span>
						</button>
						<button class="quick-action-btn" onclick="window.open('index.html', '_blank')">
							<i class="fas fa-eye"></i>
							<span class="action-text-jp">サイトを表示</span>
							<span class="action-text-en">View Site</span>
						</button>
					</div>
				</div>
			</section>

			<!-- Products Tab -->
			<section id="tab-products" class="admin-tab">
				<div class="admin-page-header">
					<div class="page-header-main">
						<h1 class="admin-page-title-jp">商品管理</h1>
						<h2 class="admin-page-title-en">Product Management</h2>
					</div>
					<button class="admin-btn-premium primary" id="btnNewProduct">
						<i class="fas fa-plus"></i>
						<span class="btn-text-jp">新規商品</span>
						<span class="btn-text-en">New Product</span>
					</button>
				</div>

				<div class="admin-workspace">
					<!-- Product List -->
					<div class="admin-list-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">商品リスト</h3>
							<p class="panel-title-en">Product List</p>
						</div>
						<input type="search" id="productSearch" class="admin-search" placeholder="商品を検索 / Search products…">
						<div id="productsList" class="admin-list"></div>
					</div>

					<!-- Product Form -->
					<div class="admin-form-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">商品情報</h3>
							<p class="panel-title-en">Product Details</p>
						</div>
						<form id="productForm" class="admin-form">
							<input type="hidden" id="productDocId">
							
							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">商品名</span>
									<span class="label-en">Product Name</span>
									<span class="label-required">*</span>
								</label>
								<input id="productName" class="form-input" required placeholder="例: 手作り陶器の茶碗">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">職人名</span>
									<span class="label-en">Artisan</span>
								</label>
								<input id="productArtisan" class="form-input" placeholder="例: 田中太郎">
							</div>

							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">所在地</span>
										<span class="label-en">Location</span>
									</label>
									<input id="productLocation" class="form-input" placeholder="例: 京都">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">カテゴリー</span>
										<span class="label-en">Category</span>
									</label>
									<input id="productCategory" class="form-input" placeholder="pottery, kimono, cutlery…">
								</div>
							</div>

							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">バッジ</span>
										<span class="label-en">Badge</span>
									</label>
									<input id="productBadge" class="form-input" placeholder="New, Masterpiece…">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">価格 (円)</span>
										<span class="label-en">Price (JPY)</span>
										<span class="label-required">*</span>
									</label>
									<input id="productPrice" type="number" min="0" step="1" class="form-input" required placeholder="15000">
								</div>
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">説明</span>
									<span class="label-en">Description</span>
								</label>
								<textarea id="productDescription" rows="3" class="form-textarea" placeholder="商品の詳細説明…"></textarea>
							</div>

							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">材料</span>
										<span class="label-en">Materials</span>
									</label>
									<input id="productMaterials" class="form-input" placeholder="例: 陶器、釉薬">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">寸法</span>
										<span class="label-en">Dimensions</span>
									</label>
									<input id="productDimensions" class="form-input" placeholder="例: 12cm × 8cm">
								</div>
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">画像URL</span>
									<span class="label-en">Image URL</span>
								</label>
								<input id="productImage" class="form-input" placeholder="https://…">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">画像をアップロード</span>
									<span class="label-en">Upload Image</span>
								</label>
								<div class="file-upload-area">
									<input id="productImageFile" type="file" accept="image/*" class="file-input">
									<label for="productImageFile" class="file-upload-label">
										<i class="fas fa-cloud-upload-alt"></i>
										<span class="upload-text-jp">ファイルを選択</span>
										<span class="upload-text-en">Choose File</span>
									</label>
								</div>
							</div>

							<div class="form-actions-premium">
								<button type="submit" class="admin-btn-premium primary large">
									<i class="fas fa-save"></i>
									<span class="btn-text-jp">保存</span>
									<span class="btn-text-en">Save</span>
								</button>
								<button type="button" class="admin-btn-premium secondary" id="resetProductBtn">
									<i class="fas fa-rotate-left"></i>
									<span class="btn-text-jp">リセット</span>
									<span class="btn-text-en">Reset</span>
								</button>
								<button type="button" class="admin-btn-premium danger" id="deleteProductBtn" style="display:none;">
									<i class="fas fa-trash"></i>
									<span class="btn-text-jp">削除</span>
									<span class="btn-text-en">Delete</span>
								</button>
							</div>
						</form>
					</div>

					<!-- Product Preview -->
					<div class="admin-preview-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">プレビュー</h3>
							<p class="panel-title-en">Live Preview</p>
						</div>
						<div id="productPreview" class="admin-preview-container">
							<div class="preview-placeholder">
								<i class="fas fa-eye"></i>
								<p class="placeholder-text-jp">フォームに入力してプレビューを表示</p>
								<p class="placeholder-text-en">Fill out the form to see preview</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Artisans Tab -->
			<section id="tab-artisans" class="admin-tab">
				<div class="admin-page-header">
					<div class="page-header-main">
						<h1 class="admin-page-title-jp">職人管理</h1>
						<h2 class="admin-page-title-en">Artisan Management</h2>
					</div>
					<button class="admin-btn-premium primary" id="btnNewArtisan">
						<i class="fas fa-plus"></i>
						<span class="btn-text-jp">新規職人</span>
						<span class="btn-text-en">New Artisan</span>
					</button>
				</div>

				<div class="admin-workspace">
					<!-- Artisan List -->
					<div class="admin-list-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">職人リスト</h3>
							<p class="panel-title-en">Artisan List</p>
						</div>
						<input type="search" id="artisanSearch" class="admin-search" placeholder="職人を検索 / Search artisans…">
						<div id="artisansList" class="admin-list"></div>
					</div>

					<!-- Artisan Form -->
					<div class="admin-form-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">職人情報</h3>
							<p class="panel-title-en">Artisan Details</p>
						</div>
						<form id="artisanForm" class="admin-form">
							<input type="hidden" id="artisanDocId">
							
							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">名前</span>
										<span class="label-en">Name</span>
										<span class="label-required">*</span>
									</label>
									<input id="artisanName" class="form-input" required placeholder="Yuki Tanaka">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">名前（日本語）</span>
										<span class="label-en">Name (Japanese)</span>
									</label>
									<input id="artisanNameJp" class="form-input" placeholder="田中由紀">
								</div>
							</div>

							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">職業</span>
										<span class="label-en">Craft</span>
									</label>
									<input id="artisanCraft" class="form-input" placeholder="Potter">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">職業（日本語）</span>
										<span class="label-en">Craft (Japanese)</span>
									</label>
									<input id="artisanCraftJp" class="form-input" placeholder="陶芸家">
								</div>
							</div>

							<div class="form-row">
								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">所在地</span>
										<span class="label-en">Location</span>
									</label>
									<input id="artisanLocation" class="form-input" placeholder="Kyoto">
								</div>

								<div class="form-group-bilingual">
									<label class="form-label">
										<span class="label-jp">経験年数</span>
										<span class="label-en">Years of Experience</span>
									</label>
									<input id="artisanYears" type="number" min="0" step="1" class="form-input" placeholder="25">
								</div>
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">専門</span>
									<span class="label-en">Specialty</span>
								</label>
								<input id="artisanSpecialty" class="form-input" placeholder="Raku Pottery">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">物語</span>
									<span class="label-en">Story</span>
								</label>
								<textarea id="artisanStory" rows="4" class="form-textarea" placeholder="職人の物語を入力…"></textarea>
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">引用</span>
									<span class="label-en">Quote</span>
								</label>
								<input id="artisanQuote" class="form-input" placeholder="職人の名言…">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">画像URL</span>
									<span class="label-en">Image URL</span>
								</label>
								<input id="artisanImage" class="form-input" placeholder="https://…">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">画像をアップロード</span>
									<span class="label-en">Upload Image</span>
								</label>
								<div class="file-upload-area">
									<input id="artisanImageFile" type="file" accept="image/*" class="file-input">
									<label for="artisanImageFile" class="file-upload-label">
										<i class="fas fa-cloud-upload-alt"></i>
										<span class="upload-text-jp">ファイルを選択</span>
										<span class="upload-text-en">Choose File</span>
									</label>
								</div>
							</div>

							<div class="form-actions-premium">
								<button type="submit" class="admin-btn-premium primary large">
									<i class="fas fa-save"></i>
									<span class="btn-text-jp">保存</span>
									<span class="btn-text-en">Save</span>
								</button>
								<button type="button" class="admin-btn-premium secondary" id="resetArtisanBtn">
									<i class="fas fa-rotate-left"></i>
									<span class="btn-text-jp">リセット</span>
									<span class="btn-text-en">Reset</span>
								</button>
								<button type="button" class="admin-btn-premium danger" id="deleteArtisanBtn" style="display:none;">
									<i class="fas fa-trash"></i>
									<span class="btn-text-jp">削除</span>
									<span class="btn-text-en">Delete</span>
								</button>
							</div>
						</form>
					</div>

					<!-- Artisan Preview -->
					<div class="admin-preview-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">プレビュー</h3>
							<p class="panel-title-en">Live Preview</p>
						</div>
						<div id="artisanPreview" class="admin-preview-container">
							<div class="preview-placeholder">
								<i class="fas fa-eye"></i>
								<p class="placeholder-text-jp">フォームに入力してプレビューを表示</p>
								<p class="placeholder-text-en">Fill out the form to see preview</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Content Tab -->
			<section id="tab-content" class="admin-tab">
				<div class="admin-page-header">
					<div class="page-header-main">
						<h1 class="admin-page-title-jp">コンテンツ管理</h1>
						<h2 class="admin-page-title-en">Content Management</h2>
					</div>
					<button class="admin-btn-premium primary" id="btnNewContent">
						<i class="fas fa-plus"></i>
						<span class="btn-text-jp">新規キー</span>
						<span class="btn-text-en">New Key</span>
					</button>
				</div>

				<div class="admin-workspace-content">
					<!-- Content List -->
					<div class="admin-list-panel">
						<div class="panel-header">
							<h3 class="panel-title-jp">コンテンツキー</h3>
							<p class="panel-title-en">Content Keys</p>
						</div>
						<input type="search" id="contentSearch" class="admin-search" placeholder="キーを検索 / Search keys…">
						<div id="contentList" class="admin-list"></div>
					</div>

					<!-- Content Form -->
					<div class="admin-form-panel wide">
						<div class="panel-header">
							<h3 class="panel-title-jp">コンテンツ編集</h3>
							<p class="panel-title-en">Edit Content</p>
						</div>
						<form id="contentForm" class="admin-form">
							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">キー</span>
									<span class="label-en">Key</span>
									<span class="label-required">*</span>
								</label>
								<input id="contentKey" class="form-input" required placeholder="例: collections.title">
							</div>

							<div class="form-group-bilingual">
								<label class="form-label">
									<span class="label-jp">テキスト</span>
									<span class="label-en">Text</span>
									<span class="label-required">*</span>
								</label>
								<textarea id="contentText" rows="8" class="form-textarea" required placeholder="コンテンツを入力…"></textarea>
							</div>

							<div class="form-actions-premium">
								<button type="submit" class="admin-btn-premium primary large">
									<i class="fas fa-save"></i>
									<span class="btn-text-jp">保存</span>
									<span class="btn-text-en">Save</span>
								</button>
								<button type="button" class="admin-btn-premium danger" id="deleteContentBtn" style="display:none;">
									<i class="fas fa-trash"></i>
									<span class="btn-text-jp">削除</span>
									<span class="btn-text-en">Delete</span>
								</button>
							</div>
						</form>
					</div>
				</div>
			</section>

		</main>
	</div>

	<!-- Access Denied Screen -->
	<div id="denied" class="admin-denied" style="display:none;">
		<div class="denied-content">
			<!-- Content will be injected by JS -->
		</div>
	</div>

	<!-- Premium Login Screen -->
	<div id="loginScreen" class="admin-login-screen" style="display:flex;">
		<div class="login-container">
			<div class="login-header">
				<img src="kazeblank.png" alt="Kaze Crafts" class="login-logo">
				<h1 class="login-title-jp">管理パネル</h1>
				<h2 class="login-title-en">Admin Panel</h2>
				<p class="login-subtitle">
					<span class="subtitle-jp">編集者または管理者アカウントでサインインしてください</span><br>
					<span class="subtitle-en">Sign in with your editor or admin account</span>
				</p>
			</div>

			<form id="adminLoginForm" class="login-form">
				<div class="form-group-login">
					<label class="login-label">
						<span class="label-jp">メールアドレス</span>
						<span class="label-en">Email Address</span>
					</label>
					<input type="email" id="adminEmail" class="login-input" required placeholder="email@example.com">
				</div>

				<div class="form-group-login">
					<label class="login-label">
						<span class="label-jp">パスワード</span>
						<span class="label-en">Password</span>
					</label>
					<input type="password" id="adminPassword" class="login-input" required placeholder="••••••••">
				</div>

				<div id="loginError" class="login-error" style="display:none;"></div>

				<button type="submit" class="login-btn-primary">
					<i class="fas fa-sign-in-alt"></i>
					<span class="btn-text-jp">サインイン</span>
					<span class="btn-text-en">Sign In</span>
				</button>
			</form>

			<div class="login-divider">
				<span class="divider-text-jp">または</span>
				<span class="divider-text-en">or</span>
			</div>

			<button class="login-btn-google" onclick="signInWithGoogle()">
				<i class="fab fa-google"></i>
				<span class="btn-text-jp">Googleでサインイン</span>
				<span class="btn-text-en">Sign in with Google</span>
			</button>

			<div style="margin-top:1rem;padding:1rem;background:rgba(80,200,120,0.1);border:1px solid rgba(80,200,120,0.3);border-radius:10px;text-align:center;">
				<p style="font-size:0.85rem;color:#2a2a2a;margin-bottom:0.75rem;">
					<span style="font-family:'Noto Serif JP',serif;">アクセスの問題がありますか？</span><br>
					<span style="font-family:'Cinzel',serif;font-size:0.75rem;opacity:0.8;">Having access issues?</span>
				</p>
				<button onclick="forceAdminAccess()" style="padding:0.6rem 1rem;background:white;border:1px solid rgba(80,200,120,0.5);border-radius:8px;color:#50C878;font-weight:600;cursor:pointer;font-size:0.85rem;">
					<i class="fas fa-key"></i>
					<span style="font-family:'Noto Serif JP',serif;margin-left:0.5rem;">自動アクセス付与</span>
				</button>
			</div>

			<div class="login-footer">
				<a href="index.html" class="back-link">
					<i class="fas fa-arrow-left"></i>
					<span class="link-text-jp">メインサイトに戻る</span>
					<span class="link-text-en">Back to main site</span>
				</a>
			</div>
		</div>
	</div>

	<script src="admin.js?v=2"></script>
</body>
</html>
